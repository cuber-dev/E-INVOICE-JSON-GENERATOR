<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Basic required -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Title & primary description -->
  <title>Laxmi Auto Agencies — E-Invoice Generator (Authorized)</title>
  <meta name="description" content="Official E-Invoice Generator for Laxmi Auto Agencies. Create, download and manage GST-compliant electronic invoices exclusively for Laxmi Auto Agencies' authorized transactions." />
  <meta name="keywords" content="Laxmi Auto Agencies, e-invoice, GST invoice, electronic invoice, invoice generator, auto parts invoice, invoice download, e-invoice generator" />
  <meta name="author" content="Laxmi Auto Agencies" />
  <meta name="publisher" content="Laxmi Auto Agencies" />

  <!-- Site & app related -->
  <meta name="application-name" content="Laxmi E-Invoice Generator" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#0d47a1" />
  <link rel="icon" href="logo.jpg" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png" />

  <!-- Open Graph / Facebook -->
  <meta property="og:locale" content="en_IN" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Laxmi Auto Agencies — E-Invoice Generator" />
  <meta property="og:description" content="Generate GST-compliant electronic invoices (e-invoices) exclusively for Laxmi Auto Agencies. Download PDF/JSON, preview invoices and manage invoice data." />
  <meta property="og:site_name" content="Laxmi Auto Agencies" />
  <meta property="og:image:alt" content="Laxmi Auto Agencies E-Invoice preview" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/papaparse/5.4.1/papaparse.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<!-- Add this before your script.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <!-- Styles & scripts -->
  <link rel="stylesheet" href="style.css" />
  <script defer src="script.js"></script>
</head>

<body>
  <br />
  <br />
  <br />

  <h2 class="header">E-Invoice Form for LAXMI AUTO AGENCIES PVT LTD - 36AAFCL0077Q1Z1</h2>
<div class="theme-selector">
  <button id="themeBtn">🎨 Theme</button>
  <div id="themeOptions" class="theme-options hidden">
    <button data-theme="light">🌞 Light</button>
    <button data-theme="dark">🌙 Dark</button>
    <button data-theme="blue">🔵 Blue</button>
    <button data-theme="green">🟢 Green</button>
    <button data-theme="sunset">🌅 Sunset</button>
    <button data-theme="neon">💡 Neon</button>
    <button data-theme="pastel">🎨 Pastel</button>
    <button data-theme="coffee">☕ Coffee</button>
    <button data-theme="solarized">🌐 Solarized</button>
    <button data-theme="purple">💜 Purple</button>
    <button data-theme="mono">⚪ Mono</button>
    <button data-theme="gradient">🌈 Gradient</button>
    <button data-theme="rose">🌹 Rose</button>
    <button data-theme="aqua">💧 Aqua</button>
    <button data-theme="forest">🌲 Forest</button>
    <button data-theme="gold">🥇 Gold</button>
    <button data-theme="silver">🥈 Silver</button>
    <button data-theme="crimson">❤️ Crimson</button>
    <button data-theme="indigo">🔮 Indigo</button>
    <button data-theme="cyberpunk">⚡ Cyberpunk</button>
  </div>
</div>
  <form id="invoiceForm">
    <fieldset>
      <legend>Document Details</legend>
      Document Category: <input type="text" disabled value="B2B">
      Reverse Charge: <input type="text" disabled value="NO">
      Document Type: <input type="text" disabled value="Tax Invoice">
      Document No: <input type="text" required id="docNo" value="" placeholder="enter_inv_number">
      Document Date: <input type="text" required id="docDate" value="">
    </fieldset>

    <fieldset class="seller-details" disabled>
      <legend>Seller Details</legend>
      GSTIN: <input type="text" id="sellerGstin" value="36AAFCL0077Q1Z1">
      Legal Name: <input type="text" id="sellerName" value="LAXMI AUTO AGENCIES PRIVATE LIMITED">
      Address1: <input type="text" id="sellerAddr1" value="1-13-173,VINAYAK NAGAR,NIZAMABAD">
      Location: <input type="text" id="sellerLoc" value="NIZAMABAD">
      Pin: <input type="number" id="sellerPin" value="503001">
      State Code: <input type="text" id="sellerStcd" value="36">
      Phone: <input type="text" id="sellerPh" value="9440090930">
    </fieldset>

    <fieldset>
      <legend>Buyer Details</legend>
      <label for="buyerSelector">Choose Buyer:</label>
      <select required id="buyerSelector" onchange="populateBuyerDetails()">
        <!-- Options will be added dynamically -->
      </select>

      <div class="buyer-details">
        GSTIN: <input type="text" id="buyerGstin" disabled>
        Legal Name: <input type="text" id="buyerName" disabled>
        Address1: <input type="text" id="buyerAddr1" disabled>
        Location: <input type="text" id="buyerAddr2" class="hidden" disabled>
        <input type="text" id="buyerLoc" disabled>
        <input type="number" id="buyerPin" class="hidden" disabled>
        <input type="text" id="buyerPos" class="hidden" disabled>
        <input type="text" id="buyerStcd" class="hidden" disabled>
      </div>
    </fieldset>
    <div id="itemsContainer"></div>
    <fieldset>

      <div class="buttons-container">
        <div class="total-amount">
          Total Taxable: <input type="text" value="00" id="total-taxable" disabled>
          Total IGST: <input type="text" value="00" id="total-igst" disabled>
          Total SGCT: <input type="text" value="00" id="total-sgst" disabled>
          Total CGST: <input type="text" value="00" id="total-cgst" disabled>
          Total Tax Amount: <input type="text" value="00" id="total-tax-amount" disabled>
          Total Amount :<input type="text" value="00" id="total-amount" disabled>
        </div>
        <button type="button" class="form-button" onclick="addItem()">Add Item +</button>
        <br>
        <button type="submit" class="form-button" onclick="">Generate JSON </button>
      </div>
    </fieldset>
  </form>
<!-- Bulk Upload Card -->
<section class="card bulk-card" role="region" aria-labelledby="bulk-title">
  <header class="card-header">
    <h3 id="bulk-title">Bulk Invoice Upload</h3>
    <p class="card-subtitle">Upload a CSV with <code>invDate,invNo, description, taxable, percentage,hsn,isService</code></p>
  </header>
  
  <div class="card-body">
    <div class="field">
      <label for="buyerSelect">Buyer (applies to all rows)</label>
      <select id="bulkBuyerSelect"></select>
    </div>
    
   <div class="field">
  <label for="csvFile">CSV File</label>
  
  <!-- Dropzone -->
  <div class="dropzone" id="csvDrop">
    <input type="file" id="csvFile" accept=".csv" />
    <span>Drag & drop CSV here, or click to browse</span>
  </div>
  
  <!-- File info row (hidden by default) -->
  <div id="fileInfo" class="file-info" style="display:none;">
    <span id="fileName"></span>
    <button id="removeFile" type="button" class="remove-btn">x</button>
  </div>
</div>
    
<details class="hint">
  <summary>CSV format help</summary>
  <a href="bulk_invoice_format.csv" download="bulk_invoice_format.csv">📥 Download Sample CSV</a>
</details>
  </div>
  
  <footer class="card-footer">
    <button type="button" class="btn" onclick="generateBulkInvoices()">Generate ZIP</button>
  </footer>
  <!-- =========================
 JSON Invoice Merger Component
========================= -->
<div class="json-merger-container">
  <h3>Merge Invoice JSON Files</h3>

  <!-- Drag & Drop Area -->
  <div id="dropZone" class="drop-zone">
    Drag & Drop JSON files here or click to select
    <input type="file" id="fileInput" accept=".json" multiple hidden>
  </div>

  <button id="mergeBtn" class="merge-btn" disabled>Merge & Download</button>
</div>

<!-- JSZip Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
  const dropZone = document.getElementById("dropZone");
  const fileInput = document.getElementById("fileInput");
  const mergeBtn = document.getElementById("mergeBtn");
  let selectedFiles = [];

  // Drag & drop handlers
  dropZone.addEventListener("click", () => fileInput.click());
  dropZone.addEventListener("dragover", (e) => {
    e.preventDefault();
    dropZone.classList.add("drag-over");
  });
  dropZone.addEventListener("dragleave", () => {
    dropZone.classList.remove("drag-over");
  });
  dropZone.addEventListener("drop", (e) => {
    e.preventDefault();
    dropZone.classList.remove("drag-over");
    handleFiles(e.dataTransfer.files);
  });

  fileInput.addEventListener("change", (e) => {
    handleFiles(e.target.files);
  });

  function handleFiles(files) {
    selectedFiles = [...selectedFiles, ...files];
    if (selectedFiles.length > 0) {
      mergeBtn.disabled = false;
      dropZone.textContent = `${selectedFiles.length} file(s) selected`;
    }
  }

  // Merge + Download
  mergeBtn.addEventListener("click", async () => {
    let mergedInvoices = [];

    // Read & parse files
    for (let file of selectedFiles) {
      const text = await file.text();
      try {
        const data = JSON.parse(text);
        if (Array.isArray(data)) {
          mergedInvoices.push(...data);
        } else {
          console.warn(`${file.name} is not an array`);
        }
      } catch (err) {
        console.error("Invalid JSON in", file.name, err);
      }
    }

    if (mergedInvoices.length === 0) {
      alert("No valid invoices found!");
      return;
    }

    // Sort invoices (by invoice number or date if present)
    mergedInvoices.sort((a, b) => {
      if (a.invoiceNumber && b.invoiceNumber) {
        return a.invoiceNumber - b.invoiceNumber;
      }
      return 0; // fallback
    });

    // Split into chunks of 15
    const zip = new JSZip();
    let fileCount = 1;
    for (let i = 0; i < mergedInvoices.length; i += 15) {
      const chunk = mergedInvoices.slice(i, i + 15);
      const blobContent = JSON.stringify(chunk, null, 2);
      zip.file(`merged_invoices_part${fileCount}.json`, blobContent);
      fileCount++;
    }

    // Create ZIP
    const content = await zip.generateAsync({ type: "blob" });
    const url = URL.createObjectURL(content);
    const a = document.createElement("a");
    a.href = url;
    a.download = "merged_invoices.zip";
    a.click();
    URL.revokeObjectURL(url);
  });
</script>

<style>
  .json-merger-container {
    margin: 1rem 0;
    padding: 1rem;
    border-radius: 10px;
    background: var(--bg-color, #f9f9f9);
  }
  .drop-zone {
    padding: 5rem 2rem;
    text-align: center;
    border: 2px dashed var(--primary-color, #6a0dad);
    border-radius: 10px;
    cursor: pointer;
    margin-bottom: 1rem;
  }
  .drop-zone.drag-over {
    background: var(--secondary-color, #f0e6f9);
  }
  .merge-btn {
    padding: 0.6rem 1.2rem;
    background: var(--primary-color, #6a0dad);
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  .merge-btn:disabled {
    background: #aaa;
    cursor: not-allowed;
  }
</style>
</section>
<h3>Output JSON:</h3>
  <pre id="output">NO DATA TO DISPLAY!</pre>

  <!-- Dedicated Container -->
  <div class="private-readme">
    <h1># PRIVATE PROJECT – Laxmi Auto Agencies Only #</h1>

    <blockquote>
      <strong>⚠️ WARNING:</strong> This repository is strictly <strong>NOT FOR PUBLIC USE</strong>.<br>
      Usage, distribution, or modification of this codebase is <strong>only permitted by Laxmi Auto Agencies</strong>.
    </blockquote>

    <hr>

    <h2># Project Overview</h2>
    <p>This repository contains internal code and tools specifically developed for Laxmi Auto Agencies.<br>
      It may include automation scripts, internal services, or data-handling logic tailored to our workflow and systems.</p>

    <hr>

    <h2># Access & Permissions</h2>
    <ul>
      <li><strong>Restricted Access:</strong> Only authorized personnel from Laxmi Auto Agencies are allowed to access and use this codebase.</li>
      <li><strong>Do NOT share, clone, fork, or distribute</strong> this repository or any part of it.</li>
      <li>Unauthorized use or access may result in legal consequences.</li>
    </ul>

    <hr>

    <h2># Setup & Usage</h2>
    <p><em>If you are a verified Laxmi Auto Agencies developer or technician, please refer to the internal documentation for setup instructions.<br>
        Otherwise, do not proceed.</em></p>

    <hr>

    <h2># License</h2>
    <p>This repository is <strong>proprietary and confidential</strong>.<br>
      All rights reserved by <strong>Laxmi Auto Agencies</strong>. Unauthorized use is strictly prohibited.</p>

    <hr>

    <h2># Contact</h2>
    <p>For internal issues or support:<br>
      <strong>novajames099@gmail.com</strong>
    </p>

    <hr>

    <footer>
      <p>© 2026–2030 Laxmi Auto Agencies. All rights reserved. [Developed and Designed by Nandhu]</p>
    </footer>
  </div>
</body>

</html>
